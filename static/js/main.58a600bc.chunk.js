(this["webpackJsonpdrawing-react-canvas"]=this["webpackJsonpdrawing-react-canvas"]||[]).push([[0],{100:function(e,t,a){},213:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(89),o=a.n(c),l=(a(100),a(12)),i=a(94),u=(a(85),a(23)),s=(a(88),a(38)),m=function(){var e=u.a.firestore(),t=Object(n.useState)(!1),a=Object(l.a)(t,2),c=a[0],o=a[1],m=Object(n.useState)(!1),f=Object(l.a)(m,2),d=f[0],h=f[1],g=Object(n.useState)("handdrawn"),p=Object(l.a)(g,2),v=p[0],b=p[1],E=Object(n.useState)("#000000"),y=Object(l.a)(E,2),w=y[0],j=y[1],N=Object(n.useState)("empty"),O=Object(l.a)(N,2),k=O[0],C=O[1],S=Object(n.useState)(),x=Object(l.a)(S,2),I=x[0],z=x[1],R=Object(n.useState)(""),T=Object(l.a)(R,2),D=T[0],L=T[1],M=Object(n.useState)(""),Y=Object(l.a)(M,2),F=Y[0],P=Y[1],A=Object(n.useState)([0,0]),G=Object(l.a)(A,2),U=Object(l.a)(G[0],2),X=U[0],B=U[1],q=G[1],J=Object(n.useRef)(),K=Object(n.useRef)();function W(e,t){d&&"handdrawn"==v&&(K.current.lineTo(e,t),K.current.stroke())}Object(n.useEffect)((function(){!function(){var e=J.current;e.width=500,e.height=500,e.style.backgroundColor="lightblue";var t=e.getContext("2d");t.lineWidth=3,K.current=t;var a=new Image;a.src=I,a.onload=function(){t.drawImage(a,0,0,500,500)}}()}),[I]);var H=Object(n.useState)(),V=Object(l.a)(H,2),$=V[0],Q=V[1];return document.body.addEventListener("touchstart",(function(e){var t=J.current;if(e.target==t){e.preventDefault();var a=e.touches[0],n=a.pageX-t.offsetLeft,r=a.pageY-t.offsetTop;h(!0),W(n,r)}}),!1),document.body.addEventListener("touchend",(function(e){var t=J.current;e.target==t&&(e.preventDefault(),h(!1),K.current.beginPath())}),!1),document.body.addEventListener("touchmove",(function(e){var t=J.current;if(e.target==t){e.preventDefault();var a=e.touches[0];W(a.pageX-t.offsetLeft,a.pageY-t.offsetTop)}}),!1),Object(n.useEffect)((function(){e.collection("images").onSnapshot((function(e){Q(e.docs.map((function(e){return{id:e.id,url:e.data().url,naziv:e.data().naziv}})))}))}),[]),r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("div",{className:"row align-items-end",style:{backgroundColor:"lightblue",border:"2px solid black",borderRadius:5}},r.a.createElement("div",{className:"form-group col-12 col-md-6 col-sm-12 col-xs-12"},r.a.createElement(i.a,{color:w,onChangeComplete:function(e){j(e.hex)}})),r.a.createElement("div",{className:"form-group col-12 col-md-6 col-sm-12 col-xs-12"},r.a.createElement("form",{className:"form-inline"},r.a.createElement("input",{type:"text",className:"form-control",style:{width:"30%"},value:F,onChange:function(e){return P(e.target.value)},required:!0}),r.a.createElement("button",{className:"form-control",style:{width:"30%"},onClick:function(t){t.preventDefault(),e.collection("images").onSnapshot((function(e){Q(e.docs.map((function(e){return{id:e.id,url:e.data().url}})))}));var a=J.current.getContext("2d");K.current=a;for(var n=new Image,r=0;r<$.length;r++)$[r].naziv==F&&(n.src=$[r].url,P(""));n.onload=function(){a.drawImage(n,0,0,500,500)}}},"Get")),r.a.createElement("input",{type:"file",style:{color:"transparent"},onChange:function(e){void 0!=e.target.files[0]&&z(URL.createObjectURL(e.target.files[0]))}}),r.a.createElement(s.b,{to:"/galery"},r.a.createElement("button",{className:"form-control",style:{width:"40%"}},"Gallery"))),r.a.createElement("div",{className:"form-group col-12"},r.a.createElement("form",{className:"form-inline"},r.a.createElement("input",{type:"text",className:"form-control",style:{width:"50%"},value:D,onChange:function(e){return L(e.target.value)},required:!0}),r.a.createElement("button",{className:"form-control",onClick:function(t){t.preventDefault();for(var a=J.current,n=0;n<$.length;n++)if(console.log($[n].naziv,D),$[n].naziv==D)return L(""),alert("Ime je zauzeto"),0;e.collection("images").add({url:a.toDataURL("image/png"),naziv:D}).then((function(e){console.log("Document written with ID: ",e.id)})).catch((function(e){console.error("Error adding document: ",e)})),L("")},style:{width:"30%"}},"Save")),r.a.createElement("form",{className:"form-inline"},r.a.createElement("label",{className:"form-control"},"Selection:"),r.a.createElement("label",{className:"form-control",htmlFor:"selection"},"Hand drawn"),r.a.createElement("input",{className:"form-control",type:"radio",id:"selection1",checked:"handdrawn"===v,onChange:function(){return b("handdrawn")}}),r.a.createElement("label",{className:"form-control",htmlFor:"selection"},"Line"),r.a.createElement("input",{className:"form-control",type:"radio",id:"selection2",checked:"line"===v,onChange:function(){return b("line")}}),r.a.createElement("label",{className:"form-control",htmlFor:"selection"},"Rectangle"),r.a.createElement("input",{className:"form-control",type:"radio",id:"selection3",checked:"rectangle"===v,onChange:function(){return b("rectangle")}}),r.a.createElement("label",{className:"form-control",htmlFor:"selection"},"Circle"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{className:"form-control",type:"radio",id:"selection4",checked:"circle"===v,onChange:function(){return b("circle")}})),r.a.createElement("form",{className:"form-inline"},r.a.createElement("label",{className:"form-control"},"Style:"),r.a.createElement("label",{className:"form-control",htmlFor:"style"},"Full"),r.a.createElement("input",{className:"form-control",type:"radio",id:"style1",checked:"full"===k,onChange:function(){return C("full")}}),r.a.createElement("label",{className:"form-control",htmlFor:"style"},"Empty"),r.a.createElement("input",{className:"form-control",type:"radio",id:"style2",checked:"empty"===k,onChange:function(){return C("empty")}}),r.a.createElement("button",{className:"form-control",onClick:function(e){e.preventDefault();var t=J.current,a=t.getContext("2d"),n=document.createElement("canvas");n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(t,0,0),a.clearRect(0,0,t.width,t.height),a.translate(250,250);var r=.5*Math.PI;a.rotate(r),a.drawImage(n,-t.width/2,-t.height/2),a.rotate(-r),a.translate(-t.width/2,-t.height/2)},style:{width:"30%"}},"Rotate")))),r.a.createElement("br",null),r.a.createElement("canvas",{onMouseDown:function(e){var t=e.nativeEvent;J.current.getContext("2d").strokeStyle=w;var a=t.offsetX,n=t.offsetY;q([a,n]),K.current.beginPath(),"line"==v&&K.current.moveTo(a,n),o(!0)},onMouseUp:function(e){var t=e.nativeEvent,a=t.offsetX,n=t.offsetY;"line"==v&&(K.current.moveTo(X,B),K.current.lineTo(a,n),K.current.stroke()),"rectangle"==v&&K.current.rect(X,B,a-X,n-B),"circle"==v&&K.current.arc(X,B,Math.sqrt((a-X)*(a-X)+(n-B)*(n-B)),0,2*Math.PI),"full"==k?(K.current.fillStyle=w,K.current.fill()):K.current.stroke(),K.current.closePath(),o(!1)},onMouseMove:function(e){var t=e.nativeEvent;if(c){var a=t.offsetX,n=t.offsetY;"handdrawn"==v&&(K.current.lineTo(a,n),K.current.stroke())}},ref:J}),r.a.createElement("button",{className:"form-control",onClick:function(){var e=J.current.getContext("2d");e.fillStyle="lightblue",e.fillRect(0,0,500,500)},style:{width:"10%"}},"Clear"))},f=a(7),d=function(){var e=u.a.firestore(),t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){e.collection("images").onSnapshot((function(e){o(e.docs.map((function(e){return{id:e.id,url:e.data().url,naziv:e.data().naziv}})))}))}),[]),r.a.createElement("div",null,r.a.createElement("h1",{style:{textAlign:"center"}},"GALERY"),c.map((function(e){return r.a.createElement("div",{style:{margin:10,padding:10,border:"solid black 1px",display:"inline-block",borderRadius:"30px"}},r.a.createElement("p",null,e.naziv),r.a.createElement("img",{src:e.url,width:"500",height:"500",alt:""}))})))};var h=function(){return r.a.createElement("div",{className:"container"},r.a.createElement(s.a,null,r.a.createElement(f.c,null,r.a.createElement(f.a,{path:"/",element:r.a.createElement(m,null)}),r.a.createElement(f.a,{path:"/galery",element:r.a.createElement(d,null)}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.initializeApp({apiKey:"AIzaSyBxAYVIJMzGSREaKbuxlTfzTEhLOYTS8Uc",authDomain:"popravni-858bb.firebaseapp.com",projectId:"popravni-858bb",storageBucket:"popravni-858bb.appspot.com",messagingSenderId:"301054610390",appId:"1:301054610390:web:f706b41e8534961c597277",measurementId:"G-971PKE7T8T"}),o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(h,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},95:function(e,t,a){e.exports=a(213)}},[[95,1,2]]]);
//# sourceMappingURL=main.58a600bc.chunk.js.map